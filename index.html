<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>resizer.js</title>
  <style type="text/css">
  <!--
    html, body {
        width:  100%;
        height: 100%;
        margin: 0px;
    }
  -->
  </style>
</head>

<body onload="draw()">
  <canvas id="mycanvas">
    <div id="fallback">
      You only see this message if your browser doesn't support
      canvas.
    </div>
  </canvas>
  <script>       
      var draw = function(){
          var canvas = document.getElementById('mycanvas');
          var context = canvas.getContext('2d');
          var imageObj = new Image();
          imageObj.onload = function() {
              canvas.width  = imageObj.width;
              canvas.height = imageObj.height;
              context.drawImage(imageObj, 0, 0);
          };
          var isValidUrl = function(url) {
            var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
            '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
            return !!pattern.test(url);
          };
          var hashUrl = window.location.hash.substr(1);
          imageObj.src = isValidUrl(hashUrl) 
              ? hashUrl 
              : 'https://avatars3.githubusercontent.com/u/16923';
      };
      document.onhashchange = draw;
  </script>
</body>
</html>
